<div *ngFor="let user of online_users | keyvalue" class="user_badge">
  <mat-icon
    class="icon"
    [ngClass]="user.value.favourite_colour.toString(16)"
    [svgIcon]="iconFor(user.value.prefered_set)" />
  <div class="details">
    <div class="username">{{user.value.username}}</div>
    <div *ngIf="user.value.current_gameid; then in_game; else no_game"></div>
  </div>

  <ng-template #in_game>
    <div>In game: {{user.value.current_gametype}}</div>
    <div class="control"><button mat-raised-button color="primary">Spectate</button></div>
  </ng-template>

  <ng-template #no_game>
    <button class="control" mat-fab color="primary"
    *ngFor="let game of ['Chess','Checkers']"
    (click)="ws.challenge(user.value.username, game)"
    >{{game}}</button>
  </ng-template>
</div>

<app-chat/>
